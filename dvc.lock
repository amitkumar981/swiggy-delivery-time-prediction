schema: '2.0'
stages:
  data_cleaning:
    cmd: python src/data/data_cleaning.py
    deps:
    - path: data/raw/swiggy.csv
      hash: md5
      md5: 0b050b37dfe6cfbfaa18d7cb4e454377
      size: 7772212
    - path: src/data/data_cleaning.py
      hash: md5
      md5: c2f1cc99ae3909d8dae1bfe3ee56b1db
      size: 10030
    outs:
    - path: data/cleaned/swiggy_cleaned.csv
      hash: md5
      md5: 9fc24164b5171134e3ebc44e7913703d
      size: 5173031
  data_preparation:
    cmd: python src/data/data_preparation.py
    deps:
    - path: data/cleaned/swiggy_cleaned.csv
      hash: md5
      md5: 9fc24164b5171134e3ebc44e7913703d
      size: 5173031
    - path: src/data/data_preparation.py
      hash: md5
      md5: 25f6e43bfa2a1e5708d9250d8a8a33ec
      size: 5522
    params:
      params.yaml:
        data_preparation.random_state: 30
        data_preparation.test_size: 0.25
    outs:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 370c94e78f73f3526ca51ba435a5aa16
      size: 1291433
    - path: data/interim/train_data.csv
      hash: md5
      md5: abb586492ce1e48745849293394c555b
      size: 3874400
  data_preprocessing:
    cmd: python src/feature_engineering/data_preprocessing.py
    deps:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 370c94e78f73f3526ca51ba435a5aa16
      size: 1291433
    - path: data/interim/train_data.csv
      hash: md5
      md5: abb586492ce1e48745849293394c555b
      size: 3874400
    - path: src/feature_engineering/data_preprocessing.py
      hash: md5
      md5: 0ecda9f20481d96d5ac5fc5c0ae67316
      size: 5681
    outs:
    - path: data/processed/x_train_trans.pkl
      hash: md5
      md5: 7314f34688d8605b09903ff218c1234d
      size: 12556971
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 7c65e6a3316b15b5f46fc0a40678c70f
      size: 228433
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/processed/x_train_trans.pkl
      hash: md5
      md5: 7314f34688d8605b09903ff218c1234d
      size: 12556971
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 7c65e6a3316b15b5f46fc0a40678c70f
      size: 228433
    - path: src/model/model_building.py
      hash: md5
      md5: 15730e8cf3b6a44d012282ad4478a34e
      size: 4971
    params:
      params.yaml:
        model_building.lgbm_params:
          num_leaves: 80
          max_depth: 7
          learning_rate: 0.07521051144940308
          n_estimators: 350
          lambda_l1: 4.994553000952651
          lambda_l2: 1.8523641834042492
          min_data_in_leaf: 45
          feature_fraction: 0.7095710565305883
          bagging_fraction: 0.9976539330187573
          bagging_freq: 4
        model_building.rf_params:
          n_estimators: 400
          max_depth: 21
          min_samples_split: 18
          min_samples_leaf: 10
          bootstrap: true
          max_samples: 0.7634340439115328
          min_impurity_decrease: 3.465395379320018e-05
    outs:
    - path: src/model/model.pkl
      hash: md5
      md5: 8341de5f770f4225e38e63c8b27632f6
      size: 37784789
    - path: src/model/transformer.pkl
      hash: md5
      md5: 335d0bfb8d08a453144ea233794643e5
      size: 144
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 370c94e78f73f3526ca51ba435a5aa16
      size: 1291433
    - path: data/interim/train_data.csv
      hash: md5
      md5: abb586492ce1e48745849293394c555b
      size: 3874400
    - path: data\processed\preprocessor.pkl
      hash: md5
      md5: 92497d9408d1a7326883fb95247a3a92
      size: 5187
    - path: src/model/model.pkl
      hash: md5
      md5: 8341de5f770f4225e38e63c8b27632f6
      size: 37784789
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 4955251306264e85928311284d7a330e
      size: 11082
    outs:
    - path: run_information.json
      hash: md5
      md5: 18b6aa23635712426cee62bb9d5ffcd8
      size: 220
  register_model:
    cmd: python src/model/register_model.py
    deps:
    - path: run_information.json
      hash: md5
      md5: 18b6aa23635712426cee62bb9d5ffcd8
      size: 220
    - path: src/model/register_model.py
      hash: md5
      md5: 67b1f4a00cc26e9fdb8e2431200c626c
      size: 3685
