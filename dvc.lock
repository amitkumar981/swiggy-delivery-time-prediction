schema: '2.0'
stages:
  data_cleaning:
    cmd: python src/data/data_cleaning.py
    deps:
    - path: data/raw/swiggy.csv
      hash: md5
      md5: 55bd6cc42f2360b5de9569cf9cbd8342
      size: 7726618
    - path: src/data/data_cleaning.py
      hash: md5
      md5: c84cb672446e4409c7172c786c6e76f4
      size: 10168
    outs:
    - path: data/cleaned/swiggy_cleaned.csv
      hash: md5
      md5: b736312a2a0d5064deb20f5a610a2ddc
      size: 5084092
  data_preparation:
    cmd: python src/data/data_preparation.py
    deps:
    - path: data/cleaned/swiggy_cleaned.csv
      hash: md5
      md5: b736312a2a0d5064deb20f5a610a2ddc
      size: 5084092
    - path: src/data/data_preparation.py
      hash: md5
      md5: 25f6e43bfa2a1e5708d9250d8a8a33ec
      size: 5522
    params:
      params.yaml:
        data_preparation.random_state: 42
        data_preparation.test_size: 0.25
    outs:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 451c3d76289d5f91a8e165df0d04ceef
      size: 1269290
    - path: data/interim/train_data.csv
      hash: md5
      md5: 918ae17b4dd0107019a3b178c68c38c1
      size: 3806072
  data_preprocessing:
    cmd: python src/feature_engineering/data_preprocessing.py
    deps:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 451c3d76289d5f91a8e165df0d04ceef
      size: 1269290
    - path: data/interim/train_data.csv
      hash: md5
      md5: 918ae17b4dd0107019a3b178c68c38c1
      size: 3806072
    - path: src/feature_engineering/data_preprocessing.py
      hash: md5
      md5: ba00426e984531bac80c738dcf841dfb
      size: 5677
    outs:
    - path: data/processed/x_train_trans.pkl
      hash: md5
      md5: 1aba42f974ab011d02a551f89e2a1165
      size: 12552571
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 8459672f6472a67cc89f8a4f70f26184
      size: 228353
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/processed/x_train_trans.pkl
      hash: md5
      md5: 1aba42f974ab011d02a551f89e2a1165
      size: 12552571
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 8459672f6472a67cc89f8a4f70f26184
      size: 228353
    - path: src/model/model_building.py
      hash: md5
      md5: d2799de1a51ff1e5a1f9195cc2c0feb6
      size: 4796
    params:
      params.yaml:
        model_building.lgbm_params:
          num_leaves: 80
          max_depth: 7
          learning_rate: 0.07521051144940308
          n_estimators: 350
          lambda_l1: 4.994553000952651
          lambda_l2: 1.8523641834042492
          min_data_in_leaf: 45
          feature_fraction: 0.7095710565305883
          bagging_fraction: 0.9976539330187573
          bagging_freq: 4
        model_building.rf_params:
          n_estimators: 400
          max_depth: 21
          min_samples_split: 18
          min_samples_leaf: 10
          bootstrap: true
          max_samples: 0.7634340439115328
          min_impurity_decrease: 3.465395379320017e-05
    outs:
    - path: src/model/model.pkl
      hash: md5
      md5: 1c7c3c1c8dbf09a438d809297170282f
      size: 37512858
    - path: src/model/transformer.pkl
      hash: md5
      md5: 335d0bfb8d08a453144ea233794643e5
      size: 144
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 451c3d76289d5f91a8e165df0d04ceef
      size: 1269290
    - path: data/interim/train_data.csv
      hash: md5
      md5: 918ae17b4dd0107019a3b178c68c38c1
      size: 3806072
    - path: data/processed/preprocessor.pkl
      hash: md5
      md5: 9bf7b95c93b30bbf7aff18248427f38d
      size: 5164
    - path: src/model/model.pkl
      hash: md5
      md5: 1c7c3c1c8dbf09a438d809297170282f
      size: 37512858
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 1e7e19ee71c113f8c013226a84029058
      size: 10732
    outs:
    - path: run_information.json
      hash: md5
      md5: c27ca0b802a4308b6687253912b94069
      size: 216
  register_model:
    cmd: python src/model/register_model.py
    deps:
    - path: run_information.json
      hash: md5
      md5: c27ca0b802a4308b6687253912b94069
      size: 216
    - path: src/model/register_model.py
      hash: md5
      md5: b994e25d70968c02885d84b98f0cc13c
      size: 3566
